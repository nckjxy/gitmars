#!/usr/bin/env node
"use strict";"undefined"!=typeof require&&require;const{program:e}=require("commander"),r=require("shelljs"),{options:t,args:o}=require("./conf/log"),{error:i,getLogs:s,isGitProject:n}=require("./js/index"),{createArgs:a}=require("./js/tools");n()||(r.echo(i("当前目录不是git项目目录")),r.exit(1)),e.name("gitm log").usage("[branche]").description("日志查询"),o.length>0&&e.arguments(a(o)),t.forEach((r=>{e.option(r.flags,r.description,r.defaultValue)})),e.action(((e,t)=>{return o=void 0,i=null,n=function*(){const o=s({lastet:t.lastet,limit:t.limit,branches:e});console.log(o),r.exit(1)},new Promise(((e,r)=>{var t=e=>{try{a(n.next(e))}catch(e){r(e)}},s=e=>{try{a(n.throw(e))}catch(e){r(e)}},a=r=>r.done?e(r.value):Promise.resolve(r.value).then(t,s);a((n=n.apply(o,i)).next())}));var o,i,n})),e.parse(process.argv);
