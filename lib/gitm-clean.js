#!/usr/bin/env node
"use strict";var e=require("commander"),r=require("path"),t=require("shelljs");require("fs");var i=require("colors"),o=require("slash");function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("cosmiconfig");var s=a(r),u=a(t),c=a(i),n=a(o);function l(e){return c.default.yellow(e)}const d=s.default.join(__dirname,"../cache"),{root:f,gitDir:g}=function(e=process.cwd()){const r=u.default.exec("git rev-parse --show-toplevel --show-prefix --git-common-dir --absolute-git-dir --show-cdup",{silent:!0}).stdout.replace(/[\s]*$/g,""),[t,i,o,a,s=""]=r.split("\n").map((e=>e.trim())).map(n.default);return{prefix:i||".",gitCommonDir:o,root:t,gitDir:a,gitHookDir:a+"/hooks",cdup:s}}();e.program.name("gitm clean").description("清理gitmars缓存").option("-f, --force","强制清理",!1).action((e=>{var r;u.default.exec("git rev-parse --is-inside-work-tree",{silent:!0}).stdout.includes("true")?(u.default.rm(g+"/.gitmarscommands",g+"/.gitmarslog"),e.force&&(u.default.echo(l("您输入了--force，将同时清理本地gitmars配置文件")),u.default.rm(f+"/gitmarsconfig.json",f+"/.gitmarsrc"))):u.default.echo(l("当前目录不是git项目目录")),u.default.rm(d+"/buildConfig.json",d+"/buildConfig.txt"),u.default.echo((r="清理完毕",c.default.green(r)))})),e.program.parse(process.argv);
