var __getOwnPropSymbols=Object.getOwnPropertySymbols;var __hasOwnProp=Object.prototype.hasOwnProperty;var __propIsEnum=Object.prototype.propertyIsEnumerable;var __objRest=(source,exclude)=>{var target={};for(var prop in source)if(__hasOwnProp.call(source,prop)&&exclude.indexOf(prop)<0)target[prop]=source[prop];if(source!=null&&__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(source)){if(exclude.indexOf(prop)<0&&__propIsEnum.call(source,prop))target[prop]=source[prop]}return target};const{warning}=require("../index");const createPrompt=(command,{options,validator,transform},type)=>{if(type==="checkbox"){if(!options.length)return null;let promptOpt={type:type,message:"请选择",name:command,choices:[],validate:answer=>{if(validator){let msg=true;validator(answer,options,err=>{if(err)msg=err.message});return msg}return true}};options.forEach(option=>{promptOpt.choices.push({name:option.description,value:option.long,checked:option.recommend})});return promptOpt}else if(type==="input"){let list=[];options.forEach(_a=>{var _b=_a,{validator:childValidator,transformer}=_b,opts=__objRest(_b,["validator","transformer"]);if(childValidator)validator=childValidator;let cfg={type:"input",name:opts.name,message:`${opts.description||"请输入参数"+opts.name+"的值"}${!opts.required?warning("(可不填"+(!["",void 0].includes(opts.defaultValue)?'，默认"'+opts.defaultValue+'"':"")+")"):""}`,transformer:(val,answers,flags)=>{if(!transformer){return val}else if(transformer instanceof Function){return transformer(val,answers,flags,opts)}},validate:val=>{let msg=true;if(!val&&opts.required)msg="请填写"+opts.description;validator&&msg===true&&validator(val,opts,err=>{if(err)msg=err.message});return msg}};if(opts.defaultValue!=="")cfg.defaultValue=opts.defaultValue;list.push(cfg)});return list}};module.exports=createPrompt;