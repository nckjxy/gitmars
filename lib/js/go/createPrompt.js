"use strict";var _excluded=["validator","transformer"];function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var _require=require("../index"),warning=_require.warning;var createPrompt=function createPrompt(command,_ref,type){var options=_ref.options,validator=_ref.validator,transform=_ref.transform;if(type==="checkbox"){if(!options.length)return null;prompt={type:type,message:"请选择",name:command,choices:[],validate:function validate(answer){if(validator){var msg=true;validator(answer,options,function(err){if(err)msg=err.message});return msg}return true}};options.forEach(function(option){prompt.choices.push({name:option.description,value:option.long,checked:option.recommend})});return prompt}else if(type==="input"){var list=[];options.forEach(function(_ref2){var childValidator=_ref2.validator,_transformer=_ref2.transformer,opts=_objectWithoutProperties(_ref2,_excluded);if(childValidator)validator=childValidator;var cfg={type:"input",name:opts.name,message:"".concat(opts.description||"请输入参数"+opts.name+"的值").concat(!opts.required?warning("(可不填"+(!["",undefined].includes(opts.defaultValue)?'，默认"'+opts.defaultValue+'"':"")+")"):""),transformer:function transformer(val,answers,flags){if(!_transformer){return val}else if(_transformer instanceof Function){return _transformer(val,answers,flags,opts)}},validate:function validate(val){var msg=true;if(!val&&opts.required)msg="请填写"+opts.description;validator&&msg===true&&validator(val,opts,function(err){if(err)msg=err.message});return msg}};if(opts.defaultValue!=="")cfg.defaultValue=opts.defaultValue;list.push(cfg)});return list}};module.exports=createPrompt;