import{G as a,a7 as t,a8 as s,r as e,A as r,ag as n,p as c,d as i,g as o,o as d,j as p,i as l,e as m,w as u,F as f,aa as j,q as y,s as h,t as k,k as v,h as g}from"./vendor.1f5c9905.js";import{X as x}from"./index.760ca7b2.js";import{T as b,S as w}from"./index.489fe944.js";import{u as $}from"./use-current-instance.4371f88a.js";var _={name:"ControlTasks",components:{Xterm:x},async setup(){const{getTerminal:c}=a(b,{}),{socket:i}=a(w,{}),{globalProperties:{$axios:o}}=$();t();const d=s(),p=e({project:{id:"",name:"",path:""},scripts:[],terminal:{name:""},ready:!1});r((()=>{})),n((()=>{}));const l=a=>{p.terminal&&i.emit(p.terminal.name+"-input",` ${a}\r`)};return p.project=await(async()=>(await o({url:"/common/project/list",data:{id:d.query.id}})).data)(),p.scripts=await(async()=>{const{data:{scripts:a}}=await o({url:"/cmd/fs/read",data:{path:`${p.project.path}/package.json`}});return a})(),await o({url:"/cmd/cd",data:{dir:p.project.path}}),p.terminal=c&&c(p.project.id,p.project.path),p.ready=!0,{data:p,exec:l,run:a=>{l(`yarn run ${a}`)},route:d}}};c("data-v-9acffeb6");const C={key:0,class:"page"},T=h(" tasks "),X=h("创建分支"),q={class:"cont"},z={class:"nav"},A={key:0,class:"bugfix"},F=l("dt",null,"脚本指令",-1),G=h("执行"),I={class:"main"},O=l("span",null,[l("span",{class:"iconfont icon-layout"}),h(" 当前分支： ")],-1);i(),_.render=function(a,t,s,e,r,n){const c=o("v3-button"),i=o("Xterm");return e.data.ready?(d(),p("div",C,[l("h1",null,[T,l("p",null,[m(c,{type:"primary"},{default:u((()=>[X])),_:1})])]),l("div",q,[l("div",z,[Object.keys(e.data.scripts).length>0?(d(),p("dl",A,[F,(d(!0),p(f,null,j(e.data.scripts,((a,t)=>(d(),p("dd",{class:y({active:!1}),key:t},[h(k(t)+" ",1),m(c,{type:"primary",size:"mini",onClick:a=>e.run(t),plain:""},{default:u((()=>[G])),_:2},1032,["onClick"])])))),128))])):v("",!0)]),l("div",I,[l("h3",null,[O,l("p",null,k(e.data.project.path),1)]),e.data.project?(d(),g(i,{key:0,ref:"xterm",class:"xterm",id:e.data.project.id,path:e.data.project.path},null,8,["id","path"])):v("",!0)])])])):v("",!0)},_.__scopeId="data-v-9acffeb6";export{_ as default};
